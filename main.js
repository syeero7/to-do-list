(()=>{"use strict";const t={selectedProjectId:null,activeProjectId:null,activeTaskId:null},e=document.querySelector(".rename-project"),n=document.querySelector(".delete-project"),o=document.querySelector(".add-task"),i=document.querySelector(".edit-task"),c=document.querySelector(".view-task"),s=document.querySelector(".add-project-form"),r=document.querySelector("#addProject"),a=document.querySelector(".rename-project-form"),d=document.querySelector("#renameProject"),l=document.querySelector(".delete-project-title"),u=document.querySelector(".add-task-form"),m=document.querySelector("#addTitle"),p=document.querySelector("#addDescription"),f=document.querySelector("#addDueDate"),h=document.querySelector("#addPriority"),g=document.querySelector(".edit-task-form"),y=document.querySelector("#editTitle"),v=document.querySelector("#editDescription"),k=document.querySelector("#editDueDate"),b=document.querySelector("#editPriority"),S=document.querySelector("[data-task-title]"),D=document.querySelector("[data-task-description]"),j=document.querySelector("[data-task-due-date]"),I=document.querySelector("[data-task-priority]"),E=document.querySelector("[data-task-status]"),w=document.querySelector("button[data-projects]"),L=document.querySelector(".projects"),q=document.querySelector(".todo-list"),M=document.querySelector(".selected-project"),C=document.querySelector(".todo-list>header .add-task-btn"),P=document.querySelector(".project-list"),x=document.querySelector(".task-list");function T(){return Date.now().toString()}function N(t){for(;t.firstChild;)t.firstChild.remove()}function F(t){L.dataset.active="false",q.dataset.active="true",t.dataset.projects="open"}const $=new class{#t;constructor(){this.#t=[]}addProject(t){this.#t.push(t)}deleteProject(t){const e=this.#t;for(let n=0;n<e.length;n++)if(t==e[n].id){this.#t.splice(n,1);break}}get list(){return this.#t}};class O{#e;#n;#t;constructor(){this.#e=null,this.#n=null,this.#t=[]}get id(){return this.#e}set id(t){this.#e=t}get name(){return this.#n}set name(t){this.#n=t}addTask(t){this.#t.push(t)}deleteTask(t){const e=this.#t;for(let n=0;n<e.length;n++)if(t==e[n].id){this.#t.splice(n,1);break}}get tasks(){return this.#t}}class Y{#e;#o;#i;#c;#s;#r;constructor(){this.#e=null,this.#o=null,this.#i=null,this.#c=null,this.#s=null,this.#r=!1}get id(){return this.#e}set id(t){this.#e=t}get title(){return this.#o}set title(t){this.#o=t}get description(){return this.#i}set description(t){this.#i=t}get dueDate(){return this.#c}set dueDate(t){this.#c=t}get priority(){return this.#s}set priority(t){this.#s=t}get isCompleted(){return this.#r}set isCompleted(t){this.#r=t}}function A(e,n,o,i,c=!1,s=T()){const r=new Y;r.id=s,r.title=e,r.description=n,r.dueDate=o,r.priority=i,r.isCompleted=c,$.list.find((e=>e.id==t.selectedProjectId)).addTask(r),Et(),H(),m.focus()}function H(){m.value="",p.value="",h.selectedIndex=0,function(){const t=wt();f.value=t.min,f.min=t.min,f.max=t.max}()}Math.pow(10,8);const _=6048e5,J=864e5,U=6e4,R=36e5,z=3600,B=60,V=24*z,Z=7*V,G=365.2425*V,K=G/12,Q=3*K,W=Symbol.for("constructDateFrom");function X(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&W in t?t[W](e):t instanceof Date?new t.constructor(e):new Date(e)}function tt(t,e){return X(e||t,t)}function et(t,e){return+tt(t)==+tt(e)}function nt(t,...e){const n=X.bind(null,t||e.find((t=>"object"==typeof t)));return e.map(n)}function ot(t){const e=tt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function it(t,e){const n=tt(t,e?.in);return n.setHours(0,0,0,0),n}function ct(t,e,n){const[o,i]=nt(n?.in,t,e),c=it(o),s=it(i),r=+c-ot(c),a=+s-ot(s);return Math.round((r-a)/J)}function st(t,e,n){const[o,i]=nt(n?.in,t,e);return 12*(o.getFullYear()-i.getFullYear())+(o.getMonth()-i.getMonth())}function rt(t,e){const n=tt(t,e?.in);return Math.trunc(n.getMonth()/3)+1}function at(t,e,n){const[o,i]=nt(n?.in,t,e);return 4*(o.getFullYear()-i.getFullYear())+(rt(o)-rt(i))}let dt={};function lt(){return dt}function ut(t,e){const n=lt(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=tt(t,e?.in),c=i.getDay(),s=(c<o?7:0)+c-o;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function mt(t,e,n){const[o,i]=nt(n?.in,t,e),c=ut(o,n),s=ut(i,n),r=+c-ot(c),a=+s-ot(s);return Math.round((r-a)/_)}function pt(t,e,n){const[o,i]=nt(n?.in,t,e);return o.getFullYear()-i.getFullYear()}function ft(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return 0===n?0:n}}function ht(t,e,n){const[o,i]=nt(n?.in,t,e),c=(+o-+i)/R;return ft(n?.roundingMethod)(c)}function gt(t,e){return+tt(t)-+tt(e)}function yt(t,e,n){const o=gt(t,e)/U;return ft(n?.roundingMethod)(o)}function vt(t,e,n){const o=gt(t,e)/1e3;return ft(n?.roundingMethod)(o)}function kt(t,e,n){let o,i=0;const[c,s]=nt(n?.in,t,e);if(n?.unit)o=n?.unit,"second"===o?i=vt(c,s):"minute"===o?i=yt(c,s):"hour"===o?i=ht(c,s):"day"===o?i=ct(c,s):"week"===o?i=mt(c,s):"month"===o?i=st(c,s):"quarter"===o?i=at(c,s):"year"===o&&(i=pt(c,s));else{const t=vt(c,s);Math.abs(t)<B?(i=vt(c,s),o="second"):Math.abs(t)<z?(i=yt(c,s),o="minute"):Math.abs(t)<V&&Math.abs(ct(c,s))<1?(i=ht(c,s),o="hour"):Math.abs(t)<Z&&(i=ct(c,s))&&Math.abs(i)<7?o="day":Math.abs(t)<K?(i=mt(c,s),o="week"):Math.abs(t)<Q?(i=st(c,s),o="month"):Math.abs(t)<G&&at(c,s)<4?(i=at(c,s),o="quarter"):(i=pt(c,s),o="year")}return new Intl.RelativeTimeFormat(n?.locale,{numeric:"auto",...n}).format(i,o)}function bt(){const t=$.list.map((t=>({id:t.id,name:t.name,tasks:t.tasks.map((t=>({id:t.id,title:t.title,description:t.description,dueDate:t.dueDate,priority:t.priority,isCompleted:t.isCompleted})))})));localStorage.setItem("toDo_L1st",JSON.stringify(t))}function St(e){t.activeTaskId=e,function(){const e=$.list.find((e=>e.id==t.selectedProjectId)).tasks.find((e=>e.id==t.activeTaskId));S.textContent=e.title,D.textContent=e.description,j.textContent=function(t,e){const n=et(e.toISOString().slice(0,10),t),o=n?"today":kt(t,e);return+tt(t)<Date.now()&&!n?"task is overdue":`task is due ${o}`}(e.dueDate,new Date),I.textContent=e.priority,E.textContent=e.isCompleted?"task is completed":"task is incomplete"}(),c.showModal()}function Dt(t,e){return(t<0?"-":"")+Math.abs(t).toString().padStart(e,"0")}function jt(t,e){const n=tt(t,e?.in);if(isNaN(+n))throw new RangeError("Invalid time value");const o=e?.format??"extended",i=e?.representation??"complete";let c="",s="";const r="extended"===o?"-":"",a="extended"===o?":":"";if("time"!==i){const t=Dt(n.getDate(),2),e=Dt(n.getMonth()+1,2);c=`${Dt(n.getFullYear(),4)}${r}${e}${r}${t}`}if("date"!==i){const t=n.getTimezoneOffset();if(0!==t){const e=Math.abs(t);s=`${t<0?"+":"-"}${Dt(Math.trunc(e/60),2)}:${Dt(e%60,2)}`}else s="Z";c=`${c}${""===c?"":"T"}${[Dt(n.getHours(),2),Dt(n.getMinutes(),2),Dt(n.getSeconds(),2)].join(a)}${s}`}return c}function It(t,e,n){const{years:o=0,months:i=0,weeks:c=0,days:s=0,hours:r=0,minutes:a=0,seconds:d=0}=e,l=tt(t,n?.in),u=i||o?function(t,e,n){const o=tt(t,n?.in);if(isNaN(e))return X(n?.in||t,NaN);if(!e)return o;const i=o.getDate(),c=X(n?.in||t,o.getTime());return c.setMonth(o.getMonth()+e+1,0),i>=c.getDate()?c:(o.setFullYear(c.getFullYear(),c.getMonth(),i),o)}(l,i+12*o):l,m=s||c?function(t,e,n){const o=tt(t,n?.in);return isNaN(e)?X(n?.in||t,NaN):e?(o.setDate(o.getDate()+e),o):o}(u,s+7*c):u,p=1e3*(d+60*(a+60*r));return X(n?.in||t,+m+p)}function Et(){N(x),function(){const e=function(t){const e=document.createDocumentFragment();return t.forEach((t=>{const n=document.createElement("li");n.dataset.taskId=t.id;const o=document.createElement("label");t.isCompleted&&o.classList.add("completed"),o.dataset.priority=t.priority.toLowerCase();const i=document.createElement("input");i.type="checkbox",i.checked=t.isCompleted;const c=document.createTextNode(t.title),s=document.createElement("span");s.ariaLabel="due date",s.classList.add("due-date"),s.textContent=et((new Date).toISOString().slice(0,10),t.dueDate)?"today":kt(t.dueDate,new Date);const r=document.createElement("div");r.classList.add("dropdown-container");const a=document.createElement("button");a.classList.add("more-btn","btn-bg"),a.ariaLabel="task options";const d=function(){const t=document.createElement("article");t.classList.add("dropdown-content");const e=document.createElement("button");e.classList.add("drop-view-btn"),e.textContent="View";const n=document.createElement("button");n.classList.add("drop-edit-btn"),n.textContent="Edit";const o=document.createElement("button");return o.classList.add("drop-delete-btn"),o.textContent="Delete",t.append(e,n,o),t}();o.append(i,c),r.append(a,d),n.append(o,s,r),e.appendChild(n)})),e}($.list.find((e=>e.id==t.selectedProjectId)).tasks);x.appendChild(e)}(),bt()}function wt(){const t=new Date;return{min:t.toISOString().slice(0,10),max:jt(It(t,{years:10}),{representation:"date"})}}function Lt(){if(C.disabled=!0,M.textContent="Please select a project",N(x),![...P.querySelectorAll("li")].some((t=>t.classList.contains("selected"))))return;C.disabled=!1;const e=$.list.find((e=>e.id==t.selectedProjectId));M.textContent=e.name}function qt(){N(P),function(){const t=function(t){const e=document.createDocumentFragment();return t.forEach((t=>{const n=document.createElement("li");n.dataset.projectId=t.id;const o=document.createElement("a");o.textContent=t.name,o.href="#";const i=document.createElement("button");i.classList.add("edit-btn","btn-bg"),i.ariaLabel="rename project";const c=document.createElement("button");c.classList.add("delete-btn","btn-bg"),c.ariaLabel="delete project",n.append(o,i,c),e.appendChild(n)})),e}($.list);P.appendChild(t)}(),Lt(),bt()}function Mt(t,e=T()){const n=new O;n.id=e,n.name=t,$.addProject(n),r.value="",qt()}localStorage.getItem("toDo_L1st")||localStorage.setItem("toDo_L1st",JSON.stringify([{id:"1733114048486",name:"personal",tasks:[{id:"1733114088917",title:"idle for a while",description:"",dueDate:"2024-12-02",priority:"important",isCompleted:!0},{id:"1733114407692",title:"make a todo list",description:"make a todo list and then immediately forget what’s on it",dueDate:"2024-12-02",priority:"normal",isCompleted:!0}]}])),function(){const e=localStorage.getItem("toDo_L1st");e&&e.length&&(JSON.parse(e).forEach((e=>{Mt(e.name,e.id),t.selectedProjectId=e.id,e.tasks.forEach((t=>{A(t.title,t.description,t.dueDate,t.priority,t.isCompleted,t.id)}))})),N(x))}(),w.addEventListener("click",(function(){"open"===this.dataset.projects?(q.dataset.active="false",L.dataset.active="true",this.dataset.projects="close"):F(this)})),s.addEventListener("submit",(function(t){t.preventDefault();const e=r.value.trim();e.length&&Mt(e)})),P.addEventListener("click",(o=>{const i=o.target;if("A"!==i.tagName&&"BUTTON"!==i.tagName)return;const c=i.parentElement.dataset.projectId;i.matches(".edit-btn")&&function(n){t.activeProjectId=n,function(t){const e=$.list.find((e=>e.id===t));d.value=e.name}(n),e.showModal()}(c),i.matches(".delete-btn")&&function(e){t.activeProjectId=e,function(t){const e=$.list.find((e=>e.id===t));l.textContent=e.name}(e),n.showModal()}(c),"A"===i.tagName&&(o.preventDefault(),function(e,n){P.querySelectorAll("li").forEach((t=>{t.classList.remove("selected")})),n.parentElement.classList.add("selected"),t.selectedProjectId=e,Lt(),Et()}(c,i),"open"!==w.dataset.projects&&F(w))})),a.addEventListener("submit",(function(n){n.preventDefault();const o=d.value.trim();o.length&&function(n){$.list.find((e=>e.id===t.activeProjectId)).name=n,qt(),e.close(),t.activeProjectId=null}(o)})),a.addEventListener("click",(function(n){n.target.matches(".cancel-btn")&&(e.close(),t.activeProjectId=null)})),n.querySelector(".btn-container").addEventListener("click",(function(e){e.target.matches(".confirm-btn")&&($.deleteProject(t.activeProjectId),t.activeProjectId=null,n.close(),qt()),e.target.matches(".cancel-btn")&&(t.activeProjectId=null,n.close())})),C.addEventListener("click",(function(){H(),o.showModal()})),u.addEventListener("submit",(function(t){t.preventDefault();const e=m.value.trim(),n=p.value.trim(),o=f.value.trim(),i=h.value.trim();e.length&&A(e,n,o,i)})),u.addEventListener("click",(t=>{t.target.matches(".close-btn")&&o.close()})),x.addEventListener("change",(function(e){const n=e.target;if("checkbox"!==n.type)return;const o=n.closest("li").dataset.taskId;$.list.find((e=>e.id==t.selectedProjectId)).tasks.find((t=>t.id==o)).isCompleted=n.checked,bt(),n.checked?n.parentElement.classList.add("completed"):n.parentElement.classList.remove("completed")})),x.addEventListener("click",(function(e){const n=e.target;if(!n.parentElement.matches(".dropdown-content"))return;const o=n.closest("li").dataset.taskId;n.matches(".drop-view-btn")&&St(o),n.matches(".drop-edit-btn")&&function(e){t.activeTaskId=e,function(){const e=$.list.find((e=>e.id==t.selectedProjectId)).tasks.find((e=>e.id==t.activeTaskId)),n=wt();y.value=e.title,v.value=e.description,k.value=e.dueDate,k.min=n.min,k.max=n.max,b.value=e.priority}(),i.showModal()}(o),n.matches(".drop-delete-btn")&&function(e){$.list.find((e=>e.id==t.selectedProjectId)).deleteTask(e),Et()}(o)})),g.addEventListener("submit",(function(e){e.preventDefault(),function(e,n,o,c){if(!e.length)return;const s=$.list.find((e=>e.id==t.selectedProjectId)).tasks.find((e=>e.id==t.activeTaskId));s.title=e,s.description=n,s.dueDate=o,s.priority=c,Et(),i.close(),t.activeTaskId=null}(y.value.trim(),v.value.trim(),k.value.trim(),b.value.trim())})),g.addEventListener("click",(t=>{t.target.matches(".cancel-btn")&&i.close()})),c.addEventListener("click",(e=>{e.target.matches(".close-btn")&&(c.close(),t.activeTaskId=null)}))})();
//# sourceMappingURL=main.js.map